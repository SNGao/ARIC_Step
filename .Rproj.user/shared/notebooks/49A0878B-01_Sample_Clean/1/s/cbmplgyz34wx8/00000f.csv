"0","# Load and preprocess data"
"0","dat_V9_cov <- dat.table"
"0","dat_V9_cov$subjectid <- sub('[A-Z]', '', dat_V9_cov$subjectid)"
"0","dat.step <- read.csv('00_Intermediate_output/step.TAC.final[valid].csv')"
"0",""
"0","# Merge datasets by subject ID"
"0","dat_vis <- merge(dat.step, dat_V9_cov, by = 'subjectid', all.x = TRUE)"
"0",""
"0","# Filter out rows with missing values in key demographic variables"
"0","dat_vis <- dat_vis %>%"
"0","  filter(!is.na(Age), !is.na(Sex), !is.na(Race), !is.na(Education), !is.na(Center), "
"0","         !is.na(APOE), !is.na(Drinking))  # Number of rows after filtering = 1282"
"0",""
"0","# Convert dates to Date type and calculate exam age"
"0","dat_vis <- dat_vis %>%"
"0","  mutate("
"0","    v1date01 = as.Date(v1date01),"
"0","    birthdat = as.Date(birthdat),"
"0","    exam_age = (v1date01 - birthdat + exam_dat) / 365.25"
"0","  ) %>%"
"0","  select(-v1date01, -birthdat)"
"0",""
"0","# Display rows with missing Smoking values"
"0","missing_smoking <- dat_vis %>% filter(is.na(Smoking))  # Number of missing Smoking = 134"
"0",""
"0","# View the number of missing Smoking values"
"0","missing_smoking"
