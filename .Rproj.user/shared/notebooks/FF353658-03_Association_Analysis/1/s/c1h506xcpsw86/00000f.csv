"0","dat_CVD = read_dta('/Users/gsn/Library/CloudStorage/OneDrive-JohnsHopkins/【JHU】Aging-RA/EBA_Cog_PA/Derived_Data/CVD_all.dta')"
"0",""
"0","temp = merge(dat_cov, dat_CVD, 'subjectid', all.x = TRUE)"
"0","## Generate HF records"
"0","list_HF = temp |>"
"0","  mutate(time_label = HF_date <= exam_dat,"
"0","         HF_label = ifelse(HF == 1 & time_label, 1,0),"
"0","         HF = HF_label) |>"
"0","  select(-HF_label, -time_label, -HF_date)"
"0","list_HF$HF = ifelse(is.na(list_HF$HF), 0,list_HF$HF)"
"0",""
"0","## Generate MI records"
"0","list_MI = temp |>"
"0","  mutate(time_label = MI_date <= exam_dat,"
"0","         MI_label = ifelse(MI == 1 & time_label, 1,0),"
"0","         MI = MI_label) |>"
"0","  select(-MI_label, -time_label, -MI_date) # The list of individuals who have HF before V5."
"0","list_MI$MI = ifelse(is.na(list_MI$MI), 0,list_MI$MI)"
"0",""
"0","## Generate Stroke records"
"0","list_stroke = temp |>"
"0","  mutate(time_label = stroke_date <= exam_dat,"
"0","         stroke_label = ifelse(stroke == 1 & time_label, 1,0),"
"0","         stroke = stroke_label) |>"
"0","  select(-stroke_label, -time_label, -stroke_date) # The list of individuals who have HF before V5."
"0","list_stroke$stroke = ifelse(is.na(list_stroke$stroke), 0,list_stroke$stroke)"
"0",""
"0","sum(!dat_cov$subjectid == list_HF$subjectid)"
"1","[1]"
"1"," 0"
"1","
"
"0","sum(!dat_cov$subjectid == list_MI$subjectid)"
"1","[1]"
"1"," 0"
"1","
"
"0","sum(!dat_cov$subjectid == list_stroke$subjectid)"
"1","[1]"
"1"," 0"
"1","
"
"0","dat_cov$HF = list_HF$HF"
"0","dat_cov$MI = list_MI$MI"
"0","dat_cov$Stroke = list_stroke$stroke"
